function parseStatus(e){$.ajax({method:"POST",url:e,data:null}).done(function(e){var a=e.substring(36).slice(0,-2);selectMoscow(JSON.parse(a.replace(/(['"])?([a-zA-Z_]+)(['"])?:/g,'"$2": ')))})}function selectMoscow(e){var a=e.regions;a.forEach(function(e){"213"==e.regionId&&updateStatus(e)})}function updateStatus(e){var a=["0 баллов","1 балл","2 балла","3 балла","4 балла","5 баллов","6 баллов","7 баллов","8 баллов","9 баллов","10 баллов"],t=e.level,s=0,o=e.style;$(".level").text(a[t]),t>=0&&1>=t?s=1:t>=2&&3>=t?s=2:t>=4&&5>=t?s=3:t>=6&&7>=t?s=4:t>=8&&9>=t?s=5:t>=10&&(s=6),console.log(t);for(var i=1;6>=i;i++)i==s?($("#road_"+i).removeClass("bounceOutDown").addClass("animated bounceInUp active"),setTimeout(function(){$("#road_"+i).removeClass("bounceInUp")},1e3)):($("#road_"+i).addClass("bounceOutDown").removeClass("bounceInUp"),setTimeout(function(){$("#road_"+i).removeClass("active")},1e3));switch(o){case"green":activateLight("green");break;case"yellow":activateLight("yellow");break;case"red":activateLight("red")}}function activateLight(e){var a=["red","yellow","green"];a.forEach(function(a){a==e?($("#"+a+"Main").removeClass(a+"DeactiveMain").removeClass(a+"FlashingMain").addClass(a+"ActiveMain"),$("#"+a+"Add").removeClass(a+"DeactiveAdd").removeClass(a+"FlashingAdd").addClass(a+"ActiveAdd"),$("body").addClass(a+"ActiveBody"),$(".levelContainer").addClass(a+"ActiveAdd")):($("#"+a+"Main").removeClass(a+"ActiveMain").removeClass(a+"FlashingMain").addClass(a+"DeactiveMain"),$("#"+a+"Add").removeClass(a+"ActiveAdd").removeClass(a+"FlashingAdd").addClass(a+"DeactiveAdd"),$("body").removeClass(a+"ActiveBody"),$(".levelContainer").removeClass(a+"ActiveAdd"))}),console.log(e+" is activated"),setTimeout('parseStatus("//nickaroot.me/trafficlight/parse.php")',1e3*updateInterval)}updateInterval=60,$(document).ready(function(){parseStatus("//nickaroot.me/trafficlight/parse.php")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicGFyc2VTdGF0dXMiLCJ1cmwiLCIkIiwiYWpheCIsIm1ldGhvZCIsImRhdGEiLCJkb25lIiwibXNnIiwibXNnRm9ybWF0dGVkIiwic3Vic3RyaW5nIiwic2xpY2UiLCJzZWxlY3RNb3Njb3ciLCJKU09OIiwicGFyc2UiLCJyZXBsYWNlIiwianNvbiIsInJlZ2lvbnMiLCJmb3JFYWNoIiwiaXRlbSIsInJlZ2lvbklkIiwidXBkYXRlU3RhdHVzIiwicmVnaW9uIiwibGV2ZWxzIiwibGV2ZWwiLCJyb2FkIiwic3R5bGUiLCJ0ZXh0IiwiY29uc29sZSIsImxvZyIsImkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImFjdGl2YXRlTGlnaHQiLCJjb2xvciIsImNvbG9ycyIsInVwZGF0ZUludGVydmFsIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IkFBRUEsUUFBU0EsYUFBWUMsR0FDcEJDLEVBQUVDLE1BQ0RDLE9BQVEsT0FDUkgsSUFBS0EsRUFDTEksS0FBTSxPQUVOQyxLQUFLLFNBQVNDLEdBQ2QsR0FBSUMsR0FBZUQsRUFBSUUsVUFBVSxJQUFJQyxNQUFNLEVBQUcsR0FDOUNDLGNBQWFDLEtBQUtDLE1BQU1MLEVBQWFNLFFBQVEsK0JBQWdDLGNBUS9FLFFBQVNILGNBQWFJLEdBQ3JCLEdBQUlDLEdBQVVELEVBQUtDLE9BQ25CQSxHQUFRQyxRQUFRLFNBQVNDLEdBQ0gsT0FBakJBLEVBQUtDLFVBQ1JDLGFBQWFGLEtBS2hCLFFBQVNFLGNBQWFDLEdBQ3JCLEdBQUlDLElBQVUsV0FBWSxTQUFVLFVBQVcsVUFBVyxVQUFXLFdBQVksV0FBWSxXQUFZLFdBQVksV0FBWSxhQUM3SEMsRUFBUUYsRUFBT0UsTUFDZkMsRUFBTyxFQUNQQyxFQUFRSixFQUFPSSxLQUVuQnZCLEdBQUUsVUFBVXdCLEtBQUtKLEVBQU9DLElBRXBCQSxHQUFTLEdBQWMsR0FBVEEsRUFDakJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsR0FBYyxHQUFUQSxFQUN4QkMsRUFBTyxFQUNHRCxHQUFTLEdBQWMsR0FBVEEsRUFDeEJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsS0FDbkJDLEVBQU8sR0FHUkcsUUFBUUMsSUFBSUwsRUFFWixLQUFJLEdBQUlNLEdBQUksRUFBUSxHQUFMQSxFQUFRQSxJQUNsQkEsR0FBS0wsR0FDUnRCLEVBQUUsU0FBUzJCLEdBQUdDLFlBQVksaUJBQWlCQyxTQUFTLDhCQUNwREMsV0FBVyxXQUFXOUIsRUFBRSxTQUFTMkIsR0FBR0MsWUFBWSxlQUFnQixPQUVoRTVCLEVBQUUsU0FBUzJCLEdBQUdFLFNBQVMsaUJBQWlCRCxZQUFZLGNBQ3BERSxXQUFXLFdBQVc5QixFQUFFLFNBQVMyQixHQUFHQyxZQUFZLFdBQVksS0FJOUQsUUFBT0wsR0FDTixJQUFLLFFBQ0pRLGNBQWMsUUFDZCxNQUNELEtBQUssU0FDSkEsY0FBYyxTQUNkLE1BQ0QsS0FBSyxNQUNKQSxjQUFjLFFBTWpCLFFBQVNBLGVBQWNDLEdBQ3RCLEdBQUlDLElBQVUsTUFBTyxTQUFVLFFBQy9CQSxHQUFPbEIsUUFBUSxTQUFTQyxHQUNuQkEsR0FBUWdCLEdBQ1hoQyxFQUFFLElBQUlnQixFQUFLLFFBQVFZLFlBQVlaLEVBQUssZ0JBQWdCWSxZQUFZWixFQUFLLGdCQUFnQmEsU0FBU2IsRUFBSyxjQUNuR2hCLEVBQUUsSUFBSWdCLEVBQUssT0FBT1ksWUFBWVosRUFBSyxlQUFlWSxZQUFZWixFQUFLLGVBQWVhLFNBQVNiLEVBQUssYUFDaEdoQixFQUFFLFFBQVE2QixTQUFTYixFQUFLLGNBQ3hCaEIsRUFBRSxtQkFBbUI2QixTQUFTYixFQUFLLGVBRW5DaEIsRUFBRSxJQUFJZ0IsRUFBSyxRQUFRWSxZQUFZWixFQUFLLGNBQWNZLFlBQVlaLEVBQUssZ0JBQWdCYSxTQUFTYixFQUFLLGdCQUNqR2hCLEVBQUUsSUFBSWdCLEVBQUssT0FBT1ksWUFBWVosRUFBSyxhQUFhWSxZQUFZWixFQUFLLGVBQWVhLFNBQVNiLEVBQUssZUFDOUZoQixFQUFFLFFBQVE0QixZQUFZWixFQUFLLGNBQzNCaEIsRUFBRSxtQkFBbUI0QixZQUFZWixFQUFLLGdCQUd4Q1MsUUFBUUMsSUFBSU0sRUFBTSxpQkFDbEJGLFdBQVcsdURBQXVFLElBQWZJLGdCQTNGcEVBLGVBQWlCLEdBY2pCbEMsRUFBRW1DLFVBQVVDLE1BQU0sV0FDakJ0QyxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidXBkYXRlSW50ZXJ2YWwgPSA2MCAvLyDQutCw0LbQtNGD0Y4g0LzQuNC90YPRgtGDXG5cbmZ1bmN0aW9uIHBhcnNlU3RhdHVzKHVybCkge1xuXHQkLmFqYXgoe1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0dXJsOiB1cmwsXG5cdFx0ZGF0YTogbnVsbFxuXHR9KVxuXHQuZG9uZShmdW5jdGlvbihtc2cpIHtcblx0XHR2YXIgbXNnRm9ybWF0dGVkID0gbXNnLnN1YnN0cmluZygzNikuc2xpY2UoMCwgLTIpO1xuXHRcdHNlbGVjdE1vc2NvdyhKU09OLnBhcnNlKG1zZ0Zvcm1hdHRlZC5yZXBsYWNlKC8oWydcIl0pPyhbYS16QS1aX10rKShbJ1wiXSk/Oi9nLCAnXCIkMlwiOiAnKSkpO1xuXHR9KTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblx0cGFyc2VTdGF0dXMoJy8vbmlja2Fyb290Lm1lL3RyYWZmaWNsaWdodC9wYXJzZS5waHAnKTtcbn0pO1xuXG5mdW5jdGlvbiBzZWxlY3RNb3Njb3coanNvbikge1xuXHR2YXIgcmVnaW9ucyA9IGpzb24ucmVnaW9ucztcblx0cmVnaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRpZiAoaXRlbS5yZWdpb25JZCA9PSBcIjIxM1wiKSB7XG5cdFx0XHR1cGRhdGVTdGF0dXMoaXRlbSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHJlZ2lvbikge1xuXHR2YXIgbGV2ZWxzID0gW1wiMCDQsdCw0LvQu9C+0LJcIiwgXCIxINCx0LDQu9C7XCIsIFwiMiDQsdCw0LvQu9CwXCIsIFwiMyDQsdCw0LvQu9CwXCIsIFwiNCDQsdCw0LvQu9CwXCIsIFwiNSDQsdCw0LvQu9C+0LJcIiwgXCI2INCx0LDQu9C70L7QslwiLCBcIjcg0LHQsNC70LvQvtCyXCIsIFwiOCDQsdCw0LvQu9C+0LJcIiwgXCI5INCx0LDQu9C70L7QslwiLCBcIjEwINCx0LDQu9C70L7QslwiXTtcblx0dmFyIGxldmVsID0gcmVnaW9uLmxldmVsO1xuXHR2YXIgcm9hZCA9IDA7XG5cdHZhciBzdHlsZSA9IHJlZ2lvbi5zdHlsZTtcblxuXHQkKFwiLmxldmVsXCIpLnRleHQobGV2ZWxzW2xldmVsXSk7XG5cdFxuXHRpZiAobGV2ZWwgPj0gMCAmJiBsZXZlbCA8PSAxKSB7XG5cdFx0cm9hZCA9IDE7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gMiAmJiBsZXZlbCA8PSAzKSB7XG5cdFx0cm9hZCA9IDI7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gNCAmJiBsZXZlbCA8PSA1KSB7XG5cdFx0cm9hZCA9IDM7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gNiAmJiBsZXZlbCA8PSA3KSB7XG5cdFx0cm9hZCA9IDQ7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gOCAmJiBsZXZlbCA8PSA5KSB7XG5cdFx0cm9hZCA9IDU7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gMTApIHtcblx0XHRyb2FkID0gNjtcblx0fVxuXG5cdGNvbnNvbGUubG9nKGxldmVsKTtcblxuXHRmb3IodmFyIGkgPSAxOyBpIDw9IDY7IGkrKykge1xuXHRcdGlmIChpID09IHJvYWQpIHtcblx0XHRcdCQoXCIjcm9hZF9cIitpKS5yZW1vdmVDbGFzcyhcImJvdW5jZU91dERvd25cIikuYWRkQ2xhc3MoXCJhbmltYXRlZCBib3VuY2VJblVwIGFjdGl2ZVwiKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKFwiI3JvYWRfXCIraSkucmVtb3ZlQ2xhc3MoXCJib3VuY2VJblVwXCIpfSwgMTAwMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoXCIjcm9hZF9cIitpKS5hZGRDbGFzcyhcImJvdW5jZU91dERvd25cIikucmVtb3ZlQ2xhc3MoXCJib3VuY2VJblVwXCIpO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyQoXCIjcm9hZF9cIitpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0sIDEwMDApO1xuXHRcdH1cblx0fVxuXG5cdHN3aXRjaChzdHlsZSkge1xuXHRcdGNhc2UgXCJncmVlblwiOlxuXHRcdFx0YWN0aXZhdGVMaWdodChcImdyZWVuXCIpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInllbGxvd1wiOlxuXHRcdFx0YWN0aXZhdGVMaWdodChcInllbGxvd1wiKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJyZWRcIjpcblx0XHRcdGFjdGl2YXRlTGlnaHQoXCJyZWRcIik7XG5cdFx0XHRicmVhaztcblxuXHR9XG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlTGlnaHQoY29sb3IpIHtcblx0dmFyIGNvbG9ycyA9IFtcInJlZFwiLCBcInllbGxvd1wiLCBcImdyZWVuXCJdO1xuXHRjb2xvcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcblx0XHRpZiAoaXRlbSA9PSBjb2xvcikge1xuXHRcdFx0JChcIiNcIitpdGVtK1wiTWFpblwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ01haW5cIikuYWRkQ2xhc3MoaXRlbStcIkFjdGl2ZU1haW5cIik7XG5cdFx0XHQkKFwiI1wiK2l0ZW0rXCJBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkRlYWN0aXZlQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ0FkZFwiKS5hZGRDbGFzcyhpdGVtK1wiQWN0aXZlQWRkXCIpO1xuXHRcdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoaXRlbStcIkFjdGl2ZUJvZHlcIik7XG5cdFx0XHQkKFwiLmxldmVsQ29udGFpbmVyXCIpLmFkZENsYXNzKGl0ZW0rXCJBY3RpdmVBZGRcIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoXCIjXCIraXRlbStcIk1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkFjdGl2ZU1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nTWFpblwiKS5hZGRDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpO1xuXHRcdFx0JChcIiNcIitpdGVtK1wiQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJBY3RpdmVBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nQWRkXCIpLmFkZENsYXNzKGl0ZW0rXCJEZWFjdGl2ZUFkZFwiKTtcblx0XHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJBY3RpdmVCb2R5XCIpO1xuXHRcdFx0JChcIi5sZXZlbENvbnRhaW5lclwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiQWN0aXZlQWRkXCIpO1xuXHRcdH1cblx0fSk7XG5cdGNvbnNvbGUubG9nKGNvbG9yK1wiIGlzIGFjdGl2YXRlZFwiKTtcblx0c2V0VGltZW91dCgncGFyc2VTdGF0dXMoXCIvL25pY2thcm9vdC5tZS90cmFmZmljbGlnaHQvcGFyc2UucGhwXCIpJywgdXBkYXRlSW50ZXJ2YWwqMTAwMCk7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
