function parseStatus(e){$.ajax({method:"POST",url:e,data:{name:"John",location:"Boston"}}).done(function(e){var a=e.substring(36).slice(0,-2);selectMoscow(JSON.parse(a.replace(/(['"])?([a-zA-Z_]+)(['"])?:/g,'"$2": ')))})}function selectMoscow(e){var a=e.regions;a.forEach(function(e){"213"==e.regionId&&updateStatus(e)})}function updateStatus(e){var a=e.level,t=0,s=e.style;a>=0&&1>=a?t=1:a>=2&&3>=a?t=2:a>=4&&5>=a?t=3:a>=6&&7>=a?t=4:a>=8&&9>=a?t=5:a>=10&&(t=6),console.log(t);for(var o=1;6>=o;o++)o==t?($("#road_"+o).removeClass("bounceOutDown").addClass("animated bounceInUp active"),setTimeout(function(){$("#road_"+o).removeClass("bounceInUp")},1e3)):($("#road_"+o).addClass("bounceOutDown").removeClass("bounceInUp"),setTimeout(function(){$("#road_"+o).removeClass("active")},1e3));switch(s){case"green":activateLight("green");break;case"yellow":activateLight("yellow");break;case"red":activateLight("red")}}function activateLight(e){var a=["red","yellow","green"];a.forEach(function(a){a==e?($("#"+a+"Main").removeClass(a+"DeactiveMain").removeClass(a+"FlashingMain").addClass(a+"ActiveMain"),$("#"+a+"Add").removeClass(a+"DeactiveAdd").removeClass(a+"FlashingAdd").addClass(a+"ActiveAdd"),$("body").addClass(a+"ActiveBody")):($("#"+a+"Main").removeClass(a+"ActiveMain").removeClass(a+"FlashingMain").addClass(a+"DeactiveMain"),$("#"+a+"Add").removeClass(a+"ActiveAdd").removeClass(a+"FlashingAdd").addClass(a+"DeactiveAdd"),$("body").removeClass(a+"ActiveBody"))}),console.log(e+" is activated"),setTimeout('parseStatus("http://nickaroot.me/trafficlight/parse.php")',1e3*updateInterval)}updateInterval=60,$(document).ready(function(){parseStatus("http://nickaroot.me/trafficlight/parse.php")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicGFyc2VTdGF0dXMiLCJ1cmwiLCIkIiwiYWpheCIsIm1ldGhvZCIsImRhdGEiLCJuYW1lIiwibG9jYXRpb24iLCJkb25lIiwibXNnIiwibXNnRm9ybWF0dGVkIiwic3Vic3RyaW5nIiwic2xpY2UiLCJzZWxlY3RNb3Njb3ciLCJKU09OIiwicGFyc2UiLCJyZXBsYWNlIiwianNvbiIsInJlZ2lvbnMiLCJmb3JFYWNoIiwiaXRlbSIsInJlZ2lvbklkIiwidXBkYXRlU3RhdHVzIiwicmVnaW9uIiwibGV2ZWwiLCJyb2FkIiwic3R5bGUiLCJjb25zb2xlIiwibG9nIiwiaSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYWN0aXZhdGVMaWdodCIsImNvbG9yIiwiY29sb3JzIiwidXBkYXRlSW50ZXJ2YWwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQUFFQSxRQUFTQSxhQUFZQyxHQUNwQkMsRUFBRUMsTUFDREMsT0FBUSxPQUNSSCxJQUFLQSxFQUNMSSxNQUFRQyxLQUFNLE9BQVFDLFNBQVUsWUFFaENDLEtBQUssU0FBU0MsR0FDZCxHQUFJQyxHQUFlRCxFQUFJRSxVQUFVLElBQUlDLE1BQU0sRUFBRyxHQUM5Q0MsY0FBYUMsS0FBS0MsTUFBTUwsRUFBYU0sUUFBUSwrQkFBZ0MsY0FRL0UsUUFBU0gsY0FBYUksR0FDckIsR0FBSUMsR0FBVUQsRUFBS0MsT0FDbkJBLEdBQVFDLFFBQVEsU0FBU0MsR0FDSCxPQUFqQkEsRUFBS0MsVUFDUkMsYUFBYUYsS0FLaEIsUUFBU0UsY0FBYUMsR0FDckIsR0FBSUMsR0FBUUQsRUFBT0MsTUFDZkMsRUFBTyxFQUNQQyxFQUFRSCxFQUFPRyxLQUVmRixJQUFTLEdBQWMsR0FBVEEsRUFDakJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsR0FBYyxHQUFUQSxFQUN4QkMsRUFBTyxFQUNHRCxHQUFTLEdBQWMsR0FBVEEsRUFDeEJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsS0FDbkJDLEVBQU8sR0FHUkUsUUFBUUMsSUFBSUgsRUFFWixLQUFJLEdBQUlJLEdBQUksRUFBUSxHQUFMQSxFQUFRQSxJQUNsQkEsR0FBS0osR0FDUnZCLEVBQUUsU0FBUzJCLEdBQUdDLFlBQVksaUJBQWlCQyxTQUFTLDhCQUNwREMsV0FBVyxXQUFXOUIsRUFBRSxTQUFTMkIsR0FBR0MsWUFBWSxlQUFnQixPQUVoRTVCLEVBQUUsU0FBUzJCLEdBQUdFLFNBQVMsaUJBQWlCRCxZQUFZLGNBQ3BERSxXQUFXLFdBQVc5QixFQUFFLFNBQVMyQixHQUFHQyxZQUFZLFdBQVksS0FJOUQsUUFBT0osR0FDTixJQUFLLFFBQ0pPLGNBQWMsUUFDZCxNQUNELEtBQUssU0FDSkEsY0FBYyxTQUNkLE1BQ0QsS0FBSyxNQUNKQSxjQUFjLFFBTWpCLFFBQVNBLGVBQWNDLEdBQ3RCLEdBQUlDLElBQVUsTUFBTyxTQUFVLFFBQy9CQSxHQUFPaEIsUUFBUSxTQUFTQyxHQUNuQkEsR0FBUWMsR0FDWGhDLEVBQUUsSUFBSWtCLEVBQUssUUFBUVUsWUFBWVYsRUFBSyxnQkFBZ0JVLFlBQVlWLEVBQUssZ0JBQWdCVyxTQUFTWCxFQUFLLGNBQ25HbEIsRUFBRSxJQUFJa0IsRUFBSyxPQUFPVSxZQUFZVixFQUFLLGVBQWVVLFlBQVlWLEVBQUssZUFBZVcsU0FBU1gsRUFBSyxhQUNoR2xCLEVBQUUsUUFBUTZCLFNBQVNYLEVBQUssZ0JBRXhCbEIsRUFBRSxJQUFJa0IsRUFBSyxRQUFRVSxZQUFZVixFQUFLLGNBQWNVLFlBQVlWLEVBQUssZ0JBQWdCVyxTQUFTWCxFQUFLLGdCQUNqR2xCLEVBQUUsSUFBSWtCLEVBQUssT0FBT1UsWUFBWVYsRUFBSyxhQUFhVSxZQUFZVixFQUFLLGVBQWVXLFNBQVNYLEVBQUssZUFDOUZsQixFQUFFLFFBQVE0QixZQUFZVixFQUFLLGlCQUc3Qk8sUUFBUUMsSUFBSU0sRUFBTSxpQkFDbEJGLFdBQVcsNERBQTRFLElBQWZJLGdCQXRGekVBLGVBQWlCLEdBY2pCbEMsRUFBRW1DLFVBQVVDLE1BQU0sV0FDakJ0QyxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidXBkYXRlSW50ZXJ2YWwgPSA2MCAvLyDQutCw0LbQtNGD0Y4g0LzQuNC90YPRgtGDXG5cbmZ1bmN0aW9uIHBhcnNlU3RhdHVzKHVybCkge1xuXHQkLmFqYXgoe1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0dXJsOiB1cmwsXG5cdFx0ZGF0YTogeyBuYW1lOiBcIkpvaG5cIiwgbG9jYXRpb246IFwiQm9zdG9uXCIgfVxuXHR9KVxuXHQuZG9uZShmdW5jdGlvbihtc2cpIHtcblx0XHR2YXIgbXNnRm9ybWF0dGVkID0gbXNnLnN1YnN0cmluZygzNikuc2xpY2UoMCwgLTIpO1xuXHRcdHNlbGVjdE1vc2NvdyhKU09OLnBhcnNlKG1zZ0Zvcm1hdHRlZC5yZXBsYWNlKC8oWydcIl0pPyhbYS16QS1aX10rKShbJ1wiXSk/Oi9nLCAnXCIkMlwiOiAnKSkpO1xuXHR9KTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblx0cGFyc2VTdGF0dXMoJ2h0dHA6Ly9uaWNrYXJvb3QubWUvdHJhZmZpY2xpZ2h0L3BhcnNlLnBocCcpO1xufSk7XG5cbmZ1bmN0aW9uIHNlbGVjdE1vc2Nvdyhqc29uKSB7XG5cdHZhciByZWdpb25zID0ganNvbi5yZWdpb25zO1xuXHRyZWdpb25zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdGlmIChpdGVtLnJlZ2lvbklkID09IFwiMjEzXCIpIHtcblx0XHRcdHVwZGF0ZVN0YXR1cyhpdGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTdGF0dXMocmVnaW9uKSB7XG5cdHZhciBsZXZlbCA9IHJlZ2lvbi5sZXZlbDtcblx0dmFyIHJvYWQgPSAwO1xuXHR2YXIgc3R5bGUgPSByZWdpb24uc3R5bGU7XG5cdFxuXHRpZiAobGV2ZWwgPj0gMCAmJiBsZXZlbCA8PSAxKSB7XG5cdFx0cm9hZCA9IDE7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gMiAmJiBsZXZlbCA8PSAzKSB7XG5cdFx0cm9hZCA9IDI7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gNCAmJiBsZXZlbCA8PSA1KSB7XG5cdFx0cm9hZCA9IDM7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gNiAmJiBsZXZlbCA8PSA3KSB7XG5cdFx0cm9hZCA9IDQ7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gOCAmJiBsZXZlbCA8PSA5KSB7XG5cdFx0cm9hZCA9IDU7XG5cdH0gZWxzZSBpZiAobGV2ZWwgPj0gMTApIHtcblx0XHRyb2FkID0gNjtcblx0fVxuXG5cdGNvbnNvbGUubG9nKHJvYWQpO1xuXG5cdGZvcih2YXIgaSA9IDE7IGkgPD0gNjsgaSsrKSB7XG5cdFx0aWYgKGkgPT0gcm9hZCkge1xuXHRcdFx0JChcIiNyb2FkX1wiK2kpLnJlbW92ZUNsYXNzKFwiYm91bmNlT3V0RG93blwiKS5hZGRDbGFzcyhcImFuaW1hdGVkIGJvdW5jZUluVXAgYWN0aXZlXCIpO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyQoXCIjcm9hZF9cIitpKS5yZW1vdmVDbGFzcyhcImJvdW5jZUluVXBcIil9LCAxMDAwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChcIiNyb2FkX1wiK2kpLmFkZENsYXNzKFwiYm91bmNlT3V0RG93blwiKS5yZW1vdmVDbGFzcyhcImJvdW5jZUluVXBcIik7XG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JChcIiNyb2FkX1wiK2kpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSwgMTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0c3dpdGNoKHN0eWxlKSB7XG5cdFx0Y2FzZSBcImdyZWVuXCI6XG5cdFx0XHRhY3RpdmF0ZUxpZ2h0KFwiZ3JlZW5cIik7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwieWVsbG93XCI6XG5cdFx0XHRhY3RpdmF0ZUxpZ2h0KFwieWVsbG93XCIpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInJlZFwiOlxuXHRcdFx0YWN0aXZhdGVMaWdodChcInJlZFwiKTtcblx0XHRcdGJyZWFrO1xuXG5cdH1cbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVMaWdodChjb2xvcikge1xuXHR2YXIgY29sb3JzID0gW1wicmVkXCIsIFwieWVsbG93XCIsIFwiZ3JlZW5cIl07XG5cdGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHRcdGlmIChpdGVtID09IGNvbG9yKSB7XG5cdFx0XHQkKFwiI1wiK2l0ZW0rXCJNYWluXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJEZWFjdGl2ZU1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nTWFpblwiKS5hZGRDbGFzcyhpdGVtK1wiQWN0aXZlTWFpblwiKTtcblx0XHRcdCQoXCIjXCIraXRlbStcIkFkZFwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRGVhY3RpdmVBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nQWRkXCIpLmFkZENsYXNzKGl0ZW0rXCJBY3RpdmVBZGRcIik7XG5cdFx0XHQkKFwiYm9keVwiKS5hZGRDbGFzcyhpdGVtK1wiQWN0aXZlQm9keVwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChcIiNcIitpdGVtK1wiTWFpblwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiQWN0aXZlTWFpblwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRmxhc2hpbmdNYWluXCIpLmFkZENsYXNzKGl0ZW0rXCJEZWFjdGl2ZU1haW5cIik7XG5cdFx0XHQkKFwiI1wiK2l0ZW0rXCJBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkFjdGl2ZUFkZFwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRmxhc2hpbmdBZGRcIikuYWRkQ2xhc3MoaXRlbStcIkRlYWN0aXZlQWRkXCIpO1xuXHRcdFx0JChcImJvZHlcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkFjdGl2ZUJvZHlcIik7XG5cdFx0fVxuXHR9KTtcblx0Y29uc29sZS5sb2coY29sb3IrXCIgaXMgYWN0aXZhdGVkXCIpO1xuXHRzZXRUaW1lb3V0KCdwYXJzZVN0YXR1cyhcImh0dHA6Ly9uaWNrYXJvb3QubWUvdHJhZmZpY2xpZ2h0L3BhcnNlLnBocFwiKScsIHVwZGF0ZUludGVydmFsKjEwMDApO1xufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
