function parseStatus(e){$.ajax({method:"POST",url:e,data:null}).done(function(e){var a=e.substring(36).slice(0,-2);selectMoscow(JSON.parse(a.replace(/(['"])?([a-zA-Z_]+)(['"])?:/g,'"$2": ')))})}function selectMoscow(e){var a=e.regions;a.forEach(function(e){"213"==e.regionId&&updateStatus(e)})}function updateStatus(e){var a=["Неизветно","1 балл","2 балла","3 балла","4 балла","5 баллов","6 баллов","7 баллов","8 баллов","9 баллов","10 баллов"],t=e.level,s=0,o=e.style;$(".level").text(a[t-1]),t>=0&&1>=t?s=1:t>=2&&3>=t?s=2:t>=4&&5>=t?s=3:t>=6&&7>=t?s=4:t>=8&&9>=t?s=5:t>=10&&(s=6),console.log(s);for(var i=1;6>=i;i++)i==s?($("#road_"+i).removeClass("bounceOutDown").addClass("animated bounceInUp active"),setTimeout(function(){$("#road_"+i).removeClass("bounceInUp")},1e3)):($("#road_"+i).addClass("bounceOutDown").removeClass("bounceInUp"),setTimeout(function(){$("#road_"+i).removeClass("active")},1e3));switch(o){case"green":activateLight("green");break;case"yellow":activateLight("yellow");break;case"red":activateLight("red")}}function activateLight(e){var a=["red","yellow","green"];a.forEach(function(a){a==e?($("#"+a+"Main").removeClass(a+"DeactiveMain").removeClass(a+"FlashingMain").addClass(a+"ActiveMain"),$("#"+a+"Add").removeClass(a+"DeactiveAdd").removeClass(a+"FlashingAdd").addClass(a+"ActiveAdd"),$("body").addClass(a+"ActiveBody"),$(".levelContainer").addClass(a+"DeactiveMain")):($("#"+a+"Main").removeClass(a+"ActiveMain").removeClass(a+"FlashingMain").addClass(a+"DeactiveMain"),$("#"+a+"Add").removeClass(a+"ActiveAdd").removeClass(a+"FlashingAdd").addClass(a+"DeactiveAdd"),$("body").removeClass(a+"ActiveBody"),$(".levelContainer").removeClass(a+"DeactiveMain"))}),console.log(e+" is activated"),setTimeout('parseStatus("http://nickaroot.me/trafficlight/parse.php")',1e3*updateInterval)}updateInterval=60,$(document).ready(function(){parseStatus("http://nickaroot.me/trafficlight/parse.php")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicGFyc2VTdGF0dXMiLCJ1cmwiLCIkIiwiYWpheCIsIm1ldGhvZCIsImRhdGEiLCJkb25lIiwibXNnIiwibXNnRm9ybWF0dGVkIiwic3Vic3RyaW5nIiwic2xpY2UiLCJzZWxlY3RNb3Njb3ciLCJKU09OIiwicGFyc2UiLCJyZXBsYWNlIiwianNvbiIsInJlZ2lvbnMiLCJmb3JFYWNoIiwiaXRlbSIsInJlZ2lvbklkIiwidXBkYXRlU3RhdHVzIiwicmVnaW9uIiwibGV2ZWxzIiwibGV2ZWwiLCJyb2FkIiwic3R5bGUiLCJ0ZXh0IiwiY29uc29sZSIsImxvZyIsImkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImFjdGl2YXRlTGlnaHQiLCJjb2xvciIsImNvbG9ycyIsInVwZGF0ZUludGVydmFsIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IkFBRUEsUUFBU0EsYUFBWUMsR0FDcEJDLEVBQUVDLE1BQ0RDLE9BQVEsT0FDUkgsSUFBS0EsRUFDTEksS0FBTSxPQUVOQyxLQUFLLFNBQVNDLEdBQ2QsR0FBSUMsR0FBZUQsRUFBSUUsVUFBVSxJQUFJQyxNQUFNLEVBQUcsR0FDOUNDLGNBQWFDLEtBQUtDLE1BQU1MLEVBQWFNLFFBQVEsK0JBQWdDLGNBUS9FLFFBQVNILGNBQWFJLEdBQ3JCLEdBQUlDLEdBQVVELEVBQUtDLE9BQ25CQSxHQUFRQyxRQUFRLFNBQVNDLEdBQ0gsT0FBakJBLEVBQUtDLFVBQ1JDLGFBQWFGLEtBS2hCLFFBQVNFLGNBQWFDLEdBQ3JCLEdBQUlDLElBQVUsWUFBYSxTQUFVLFVBQVcsVUFBVyxVQUFXLFdBQVksV0FBWSxXQUFZLFdBQVksV0FBWSxhQUM5SEMsRUFBUUYsRUFBT0UsTUFDZkMsRUFBTyxFQUNQQyxFQUFRSixFQUFPSSxLQUVuQnZCLEdBQUUsVUFBVXdCLEtBQUtKLEVBQU9DLEVBQU0sSUFFMUJBLEdBQVMsR0FBYyxHQUFUQSxFQUNqQkMsRUFBTyxFQUNHRCxHQUFTLEdBQWMsR0FBVEEsRUFDeEJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsR0FBYyxHQUFUQSxFQUN4QkMsRUFBTyxFQUNHRCxHQUFTLEdBQWMsR0FBVEEsRUFDeEJDLEVBQU8sRUFDR0QsR0FBUyxLQUNuQkMsRUFBTyxHQUdSRyxRQUFRQyxJQUFJSixFQUVaLEtBQUksR0FBSUssR0FBSSxFQUFRLEdBQUxBLEVBQVFBLElBQ2xCQSxHQUFLTCxHQUNSdEIsRUFBRSxTQUFTMkIsR0FBR0MsWUFBWSxpQkFBaUJDLFNBQVMsOEJBQ3BEQyxXQUFXLFdBQVc5QixFQUFFLFNBQVMyQixHQUFHQyxZQUFZLGVBQWdCLE9BRWhFNUIsRUFBRSxTQUFTMkIsR0FBR0UsU0FBUyxpQkFBaUJELFlBQVksY0FDcERFLFdBQVcsV0FBVzlCLEVBQUUsU0FBUzJCLEdBQUdDLFlBQVksV0FBWSxLQUk5RCxRQUFPTCxHQUNOLElBQUssUUFDSlEsY0FBYyxRQUNkLE1BQ0QsS0FBSyxTQUNKQSxjQUFjLFNBQ2QsTUFDRCxLQUFLLE1BQ0pBLGNBQWMsUUFNakIsUUFBU0EsZUFBY0MsR0FDdEIsR0FBSUMsSUFBVSxNQUFPLFNBQVUsUUFDL0JBLEdBQU9sQixRQUFRLFNBQVNDLEdBQ25CQSxHQUFRZ0IsR0FDWGhDLEVBQUUsSUFBSWdCLEVBQUssUUFBUVksWUFBWVosRUFBSyxnQkFBZ0JZLFlBQVlaLEVBQUssZ0JBQWdCYSxTQUFTYixFQUFLLGNBQ25HaEIsRUFBRSxJQUFJZ0IsRUFBSyxPQUFPWSxZQUFZWixFQUFLLGVBQWVZLFlBQVlaLEVBQUssZUFBZWEsU0FBU2IsRUFBSyxhQUNoR2hCLEVBQUUsUUFBUTZCLFNBQVNiLEVBQUssY0FDeEJoQixFQUFFLG1CQUFtQjZCLFNBQVNiLEVBQUssa0JBRW5DaEIsRUFBRSxJQUFJZ0IsRUFBSyxRQUFRWSxZQUFZWixFQUFLLGNBQWNZLFlBQVlaLEVBQUssZ0JBQWdCYSxTQUFTYixFQUFLLGdCQUNqR2hCLEVBQUUsSUFBSWdCLEVBQUssT0FBT1ksWUFBWVosRUFBSyxhQUFhWSxZQUFZWixFQUFLLGVBQWVhLFNBQVNiLEVBQUssZUFDOUZoQixFQUFFLFFBQVE0QixZQUFZWixFQUFLLGNBQzNCaEIsRUFBRSxtQkFBbUI0QixZQUFZWixFQUFLLG1CQUd4Q1MsUUFBUUMsSUFBSU0sRUFBTSxpQkFDbEJGLFdBQVcsNERBQTRFLElBQWZJLGdCQTNGekVBLGVBQWlCLEdBY2pCbEMsRUFBRW1DLFVBQVVDLE1BQU0sV0FDakJ0QyxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidXBkYXRlSW50ZXJ2YWwgPSA2MCAvLyDQutCw0LbQtNGD0Y4g0LzQuNC90YPRgtGDXG5cbmZ1bmN0aW9uIHBhcnNlU3RhdHVzKHVybCkge1xuXHQkLmFqYXgoe1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0dXJsOiB1cmwsXG5cdFx0ZGF0YTogbnVsbFxuXHR9KVxuXHQuZG9uZShmdW5jdGlvbihtc2cpIHtcblx0XHR2YXIgbXNnRm9ybWF0dGVkID0gbXNnLnN1YnN0cmluZygzNikuc2xpY2UoMCwgLTIpO1xuXHRcdHNlbGVjdE1vc2NvdyhKU09OLnBhcnNlKG1zZ0Zvcm1hdHRlZC5yZXBsYWNlKC8oWydcIl0pPyhbYS16QS1aX10rKShbJ1wiXSk/Oi9nLCAnXCIkMlwiOiAnKSkpO1xuXHR9KTtcbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblx0cGFyc2VTdGF0dXMoJ2h0dHA6Ly9uaWNrYXJvb3QubWUvdHJhZmZpY2xpZ2h0L3BhcnNlLnBocCcpO1xufSk7XG5cbmZ1bmN0aW9uIHNlbGVjdE1vc2Nvdyhqc29uKSB7XG5cdHZhciByZWdpb25zID0ganNvbi5yZWdpb25zO1xuXHRyZWdpb25zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdGlmIChpdGVtLnJlZ2lvbklkID09IFwiMjEzXCIpIHtcblx0XHRcdHVwZGF0ZVN0YXR1cyhpdGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTdGF0dXMocmVnaW9uKSB7XG5cdHZhciBsZXZlbHMgPSBbXCLQndC10LjQt9Cy0LXRgtC90L5cIiwgXCIxINCx0LDQu9C7XCIsIFwiMiDQsdCw0LvQu9CwXCIsIFwiMyDQsdCw0LvQu9CwXCIsIFwiNCDQsdCw0LvQu9CwXCIsIFwiNSDQsdCw0LvQu9C+0LJcIiwgXCI2INCx0LDQu9C70L7QslwiLCBcIjcg0LHQsNC70LvQvtCyXCIsIFwiOCDQsdCw0LvQu9C+0LJcIiwgXCI5INCx0LDQu9C70L7QslwiLCBcIjEwINCx0LDQu9C70L7QslwiXTtcblx0dmFyIGxldmVsID0gcmVnaW9uLmxldmVsO1xuXHR2YXIgcm9hZCA9IDA7XG5cdHZhciBzdHlsZSA9IHJlZ2lvbi5zdHlsZTtcblxuXHQkKFwiLmxldmVsXCIpLnRleHQobGV2ZWxzW2xldmVsLTFdKTtcblx0XG5cdGlmIChsZXZlbCA+PSAwICYmIGxldmVsIDw9IDEpIHtcblx0XHRyb2FkID0gMTtcblx0fSBlbHNlIGlmIChsZXZlbCA+PSAyICYmIGxldmVsIDw9IDMpIHtcblx0XHRyb2FkID0gMjtcblx0fSBlbHNlIGlmIChsZXZlbCA+PSA0ICYmIGxldmVsIDw9IDUpIHtcblx0XHRyb2FkID0gMztcblx0fSBlbHNlIGlmIChsZXZlbCA+PSA2ICYmIGxldmVsIDw9IDcpIHtcblx0XHRyb2FkID0gNDtcblx0fSBlbHNlIGlmIChsZXZlbCA+PSA4ICYmIGxldmVsIDw9IDkpIHtcblx0XHRyb2FkID0gNTtcblx0fSBlbHNlIGlmIChsZXZlbCA+PSAxMCkge1xuXHRcdHJvYWQgPSA2O1xuXHR9XG5cblx0Y29uc29sZS5sb2cocm9hZCk7XG5cblx0Zm9yKHZhciBpID0gMTsgaSA8PSA2OyBpKyspIHtcblx0XHRpZiAoaSA9PSByb2FkKSB7XG5cdFx0XHQkKFwiI3JvYWRfXCIraSkucmVtb3ZlQ2xhc3MoXCJib3VuY2VPdXREb3duXCIpLmFkZENsYXNzKFwiYW5pbWF0ZWQgYm91bmNlSW5VcCBhY3RpdmVcIik7XG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JChcIiNyb2FkX1wiK2kpLnJlbW92ZUNsYXNzKFwiYm91bmNlSW5VcFwiKX0sIDEwMDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKFwiI3JvYWRfXCIraSkuYWRkQ2xhc3MoXCJib3VuY2VPdXREb3duXCIpLnJlbW92ZUNsYXNzKFwiYm91bmNlSW5VcFwiKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKFwiI3JvYWRfXCIraSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9LCAxMDAwKTtcblx0XHR9XG5cdH1cblxuXHRzd2l0Y2goc3R5bGUpIHtcblx0XHRjYXNlIFwiZ3JlZW5cIjpcblx0XHRcdGFjdGl2YXRlTGlnaHQoXCJncmVlblwiKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJ5ZWxsb3dcIjpcblx0XHRcdGFjdGl2YXRlTGlnaHQoXCJ5ZWxsb3dcIik7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwicmVkXCI6XG5cdFx0XHRhY3RpdmF0ZUxpZ2h0KFwicmVkXCIpO1xuXHRcdFx0YnJlYWs7XG5cblx0fVxufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUxpZ2h0KGNvbG9yKSB7XG5cdHZhciBjb2xvcnMgPSBbXCJyZWRcIiwgXCJ5ZWxsb3dcIiwgXCJncmVlblwiXTtcblx0Y29sb3JzLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdFx0aWYgKGl0ZW0gPT0gY29sb3IpIHtcblx0XHRcdCQoXCIjXCIraXRlbStcIk1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkRlYWN0aXZlTWFpblwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRmxhc2hpbmdNYWluXCIpLmFkZENsYXNzKGl0ZW0rXCJBY3RpdmVNYWluXCIpO1xuXHRcdFx0JChcIiNcIitpdGVtK1wiQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJEZWFjdGl2ZUFkZFwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRmxhc2hpbmdBZGRcIikuYWRkQ2xhc3MoaXRlbStcIkFjdGl2ZUFkZFwiKTtcblx0XHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKGl0ZW0rXCJBY3RpdmVCb2R5XCIpO1xuXHRcdFx0JChcIi5sZXZlbENvbnRhaW5lclwiKS5hZGRDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKFwiI1wiK2l0ZW0rXCJNYWluXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJBY3RpdmVNYWluXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ01haW5cIikuYWRkQ2xhc3MoaXRlbStcIkRlYWN0aXZlTWFpblwiKTtcblx0XHRcdCQoXCIjXCIraXRlbStcIkFkZFwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiQWN0aXZlQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ0FkZFwiKS5hZGRDbGFzcyhpdGVtK1wiRGVhY3RpdmVBZGRcIik7XG5cdFx0XHQkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiQWN0aXZlQm9keVwiKTtcblx0XHRcdCQoXCIubGV2ZWxDb250YWluZXJcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkRlYWN0aXZlTWFpblwiKTtcblx0XHR9XG5cdH0pO1xuXHRjb25zb2xlLmxvZyhjb2xvcitcIiBpcyBhY3RpdmF0ZWRcIik7XG5cdHNldFRpbWVvdXQoJ3BhcnNlU3RhdHVzKFwiaHR0cDovL25pY2thcm9vdC5tZS90cmFmZmljbGlnaHQvcGFyc2UucGhwXCIpJywgdXBkYXRlSW50ZXJ2YWwqMTAwMCk7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
