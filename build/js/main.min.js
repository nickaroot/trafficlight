function parseStatus(e){$.ajax({method:"POST",url:e,data:null}).done(function(e){var a=e.substring(36).slice(0,-2);selectMoscow(JSON.parse(a.replace(/(['"])?([a-zA-Z_]+)(['"])?:/g,'"$2": ')))})}function selectMoscow(e){var a=e.regions;a.forEach(function(e){"213"==e.regionId&&updateStatus(e)})}function updateStatus(e){var a=["Неизветно","1 балл","2 балла","3 балла","4 балла","5 баллов","6 баллов","7 баллов","8 баллов","9 баллов","10 баллов"],t=e.level,s=0,o=e.style;$(".level").text(a[t]),t>=0&&1>=t?s=1:t>=2&&3>=t?s=2:t>=4&&5>=t?s=3:t>=6&&7>=t?s=4:t>=8&&9>=t?s=5:t>=10&&(s=6),console.log(s);for(var i=1;6>=i;i++)i==s?($("#road_"+i).removeClass("bounceOutDown").addClass("animated bounceInUp active"),setTimeout(function(){$("#road_"+i).removeClass("bounceInUp")},1e3)):($("#road_"+i).addClass("bounceOutDown").removeClass("bounceInUp"),setTimeout(function(){$("#road_"+i).removeClass("active")},1e3));switch(o){case"green":activateLight("green");break;case"yellow":activateLight("yellow");break;case"red":activateLight("red")}}function activateLight(e){var a=["red","yellow","green"];a.forEach(function(a){a==e?($("#"+a+"Main").removeClass(a+"DeactiveMain").removeClass(a+"FlashingMain").addClass(a+"ActiveMain"),$("#"+a+"Add").removeClass(a+"DeactiveAdd").removeClass(a+"FlashingAdd").addClass(a+"ActiveAdd"),$("body").addClass(a+"ActiveBody"),$(".levelContainer").addClass(a+"DeactiveMain")):($("#"+a+"Main").removeClass(a+"ActiveMain").removeClass(a+"FlashingMain").addClass(a+"DeactiveMain"),$("#"+a+"Add").removeClass(a+"ActiveAdd").removeClass(a+"FlashingAdd").addClass(a+"DeactiveAdd"),$("body").removeClass(a+"ActiveBody"),$(".levelContainer").removeClass(a+"DeactiveMain"))}),console.log(e+" is activated"),setTimeout('parseStatus("http://nickaroot.me/trafficlight/parse.php")',1e3*updateInterval)}updateInterval=60,$(document).ready(function(){parseStatus("http://nickaroot.me/trafficlight/parse.php")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicGFyc2VTdGF0dXMiLCJ1cmwiLCIkIiwiYWpheCIsIm1ldGhvZCIsImRhdGEiLCJkb25lIiwibXNnIiwibXNnRm9ybWF0dGVkIiwic3Vic3RyaW5nIiwic2xpY2UiLCJzZWxlY3RNb3Njb3ciLCJKU09OIiwicGFyc2UiLCJyZXBsYWNlIiwianNvbiIsInJlZ2lvbnMiLCJmb3JFYWNoIiwiaXRlbSIsInJlZ2lvbklkIiwidXBkYXRlU3RhdHVzIiwicmVnaW9uIiwibGV2ZWxzIiwibGV2ZWwiLCJyb2FkIiwic3R5bGUiLCJ0ZXh0IiwiY29uc29sZSIsImxvZyIsImkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImFjdGl2YXRlTGlnaHQiLCJjb2xvciIsImNvbG9ycyIsInVwZGF0ZUludGVydmFsIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IkFBRUEsUUFBU0EsYUFBWUMsR0FDcEJDLEVBQUVDLE1BQ0RDLE9BQVEsT0FDUkgsSUFBS0EsRUFDTEksS0FBTSxPQUVOQyxLQUFLLFNBQVNDLEdBQ2QsR0FBSUMsR0FBZUQsRUFBSUUsVUFBVSxJQUFJQyxNQUFNLEVBQUcsR0FDOUNDLGNBQWFDLEtBQUtDLE1BQU1MLEVBQWFNLFFBQVEsK0JBQWdDLGNBUS9FLFFBQVNILGNBQWFJLEdBQ3JCLEdBQUlDLEdBQVVELEVBQUtDLE9BQ25CQSxHQUFRQyxRQUFRLFNBQVNDLEdBQ0gsT0FBakJBLEVBQUtDLFVBQ1JDLGFBQWFGLEtBS2hCLFFBQVNFLGNBQWFDLEdBQ3JCLEdBQUlDLElBQVUsWUFBYSxTQUFVLFVBQVcsVUFBVyxVQUFXLFdBQVksV0FBWSxXQUFZLFdBQVksV0FBWSxhQUM5SEMsRUFBUUYsRUFBT0UsTUFDZkMsRUFBTyxFQUNQQyxFQUFRSixFQUFPSSxLQUVuQnZCLEdBQUUsVUFBVXdCLEtBQUtKLEVBQU9DLElBRXBCQSxHQUFTLEdBQWMsR0FBVEEsRUFDakJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsR0FBYyxHQUFUQSxFQUN4QkMsRUFBTyxFQUNHRCxHQUFTLEdBQWMsR0FBVEEsRUFDeEJDLEVBQU8sRUFDR0QsR0FBUyxHQUFjLEdBQVRBLEVBQ3hCQyxFQUFPLEVBQ0dELEdBQVMsS0FDbkJDLEVBQU8sR0FHUkcsUUFBUUMsSUFBSUosRUFFWixLQUFJLEdBQUlLLEdBQUksRUFBUSxHQUFMQSxFQUFRQSxJQUNsQkEsR0FBS0wsR0FDUnRCLEVBQUUsU0FBUzJCLEdBQUdDLFlBQVksaUJBQWlCQyxTQUFTLDhCQUNwREMsV0FBVyxXQUFXOUIsRUFBRSxTQUFTMkIsR0FBR0MsWUFBWSxlQUFnQixPQUVoRTVCLEVBQUUsU0FBUzJCLEdBQUdFLFNBQVMsaUJBQWlCRCxZQUFZLGNBQ3BERSxXQUFXLFdBQVc5QixFQUFFLFNBQVMyQixHQUFHQyxZQUFZLFdBQVksS0FJOUQsUUFBT0wsR0FDTixJQUFLLFFBQ0pRLGNBQWMsUUFDZCxNQUNELEtBQUssU0FDSkEsY0FBYyxTQUNkLE1BQ0QsS0FBSyxNQUNKQSxjQUFjLFFBTWpCLFFBQVNBLGVBQWNDLEdBQ3RCLEdBQUlDLElBQVUsTUFBTyxTQUFVLFFBQy9CQSxHQUFPbEIsUUFBUSxTQUFTQyxHQUNuQkEsR0FBUWdCLEdBQ1hoQyxFQUFFLElBQUlnQixFQUFLLFFBQVFZLFlBQVlaLEVBQUssZ0JBQWdCWSxZQUFZWixFQUFLLGdCQUFnQmEsU0FBU2IsRUFBSyxjQUNuR2hCLEVBQUUsSUFBSWdCLEVBQUssT0FBT1ksWUFBWVosRUFBSyxlQUFlWSxZQUFZWixFQUFLLGVBQWVhLFNBQVNiLEVBQUssYUFDaEdoQixFQUFFLFFBQVE2QixTQUFTYixFQUFLLGNBQ3hCaEIsRUFBRSxtQkFBbUI2QixTQUFTYixFQUFLLGtCQUVuQ2hCLEVBQUUsSUFBSWdCLEVBQUssUUFBUVksWUFBWVosRUFBSyxjQUFjWSxZQUFZWixFQUFLLGdCQUFnQmEsU0FBU2IsRUFBSyxnQkFDakdoQixFQUFFLElBQUlnQixFQUFLLE9BQU9ZLFlBQVlaLEVBQUssYUFBYVksWUFBWVosRUFBSyxlQUFlYSxTQUFTYixFQUFLLGVBQzlGaEIsRUFBRSxRQUFRNEIsWUFBWVosRUFBSyxjQUMzQmhCLEVBQUUsbUJBQW1CNEIsWUFBWVosRUFBSyxtQkFHeENTLFFBQVFDLElBQUlNLEVBQU0saUJBQ2xCRixXQUFXLDREQUE0RSxJQUFmSSxnQkEzRnpFQSxlQUFpQixHQWNqQmxDLEVBQUVtQyxVQUFVQyxNQUFNLFdBQ2pCdEMsWUFBWSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInVwZGF0ZUludGVydmFsID0gNjAgLy8g0LrQsNC20LTRg9GOINC80LjQvdGD0YLRg1xuXG5mdW5jdGlvbiBwYXJzZVN0YXR1cyh1cmwpIHtcblx0JC5hamF4KHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdHVybDogdXJsLFxuXHRcdGRhdGE6IG51bGxcblx0fSlcblx0LmRvbmUoZnVuY3Rpb24obXNnKSB7XG5cdFx0dmFyIG1zZ0Zvcm1hdHRlZCA9IG1zZy5zdWJzdHJpbmcoMzYpLnNsaWNlKDAsIC0yKTtcblx0XHRzZWxlY3RNb3Njb3coSlNPTi5wYXJzZShtc2dGb3JtYXR0ZWQucmVwbGFjZSgvKFsnXCJdKT8oW2EtekEtWl9dKykoWydcIl0pPzovZywgJ1wiJDJcIjogJykpKTtcblx0fSk7XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cdHBhcnNlU3RhdHVzKCdodHRwOi8vbmlja2Fyb290Lm1lL3RyYWZmaWNsaWdodC9wYXJzZS5waHAnKTtcbn0pO1xuXG5mdW5jdGlvbiBzZWxlY3RNb3Njb3coanNvbikge1xuXHR2YXIgcmVnaW9ucyA9IGpzb24ucmVnaW9ucztcblx0cmVnaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRpZiAoaXRlbS5yZWdpb25JZCA9PSBcIjIxM1wiKSB7XG5cdFx0XHR1cGRhdGVTdGF0dXMoaXRlbSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHJlZ2lvbikge1xuXHR2YXIgbGV2ZWxzID0gW1wi0J3QtdC40LfQstC10YLQvdC+XCIsIFwiMSDQsdCw0LvQu1wiLCBcIjIg0LHQsNC70LvQsFwiLCBcIjMg0LHQsNC70LvQsFwiLCBcIjQg0LHQsNC70LvQsFwiLCBcIjUg0LHQsNC70LvQvtCyXCIsIFwiNiDQsdCw0LvQu9C+0LJcIiwgXCI3INCx0LDQu9C70L7QslwiLCBcIjgg0LHQsNC70LvQvtCyXCIsIFwiOSDQsdCw0LvQu9C+0LJcIiwgXCIxMCDQsdCw0LvQu9C+0LJcIl07XG5cdHZhciBsZXZlbCA9IHJlZ2lvbi5sZXZlbDtcblx0dmFyIHJvYWQgPSAwO1xuXHR2YXIgc3R5bGUgPSByZWdpb24uc3R5bGU7XG5cblx0JChcIi5sZXZlbFwiKS50ZXh0KGxldmVsc1tsZXZlbF0pO1xuXHRcblx0aWYgKGxldmVsID49IDAgJiYgbGV2ZWwgPD0gMSkge1xuXHRcdHJvYWQgPSAxO1xuXHR9IGVsc2UgaWYgKGxldmVsID49IDIgJiYgbGV2ZWwgPD0gMykge1xuXHRcdHJvYWQgPSAyO1xuXHR9IGVsc2UgaWYgKGxldmVsID49IDQgJiYgbGV2ZWwgPD0gNSkge1xuXHRcdHJvYWQgPSAzO1xuXHR9IGVsc2UgaWYgKGxldmVsID49IDYgJiYgbGV2ZWwgPD0gNykge1xuXHRcdHJvYWQgPSA0O1xuXHR9IGVsc2UgaWYgKGxldmVsID49IDggJiYgbGV2ZWwgPD0gOSkge1xuXHRcdHJvYWQgPSA1O1xuXHR9IGVsc2UgaWYgKGxldmVsID49IDEwKSB7XG5cdFx0cm9hZCA9IDY7XG5cdH1cblxuXHRjb25zb2xlLmxvZyhyb2FkKTtcblxuXHRmb3IodmFyIGkgPSAxOyBpIDw9IDY7IGkrKykge1xuXHRcdGlmIChpID09IHJvYWQpIHtcblx0XHRcdCQoXCIjcm9hZF9cIitpKS5yZW1vdmVDbGFzcyhcImJvdW5jZU91dERvd25cIikuYWRkQ2xhc3MoXCJhbmltYXRlZCBib3VuY2VJblVwIGFjdGl2ZVwiKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKFwiI3JvYWRfXCIraSkucmVtb3ZlQ2xhc3MoXCJib3VuY2VJblVwXCIpfSwgMTAwMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoXCIjcm9hZF9cIitpKS5hZGRDbGFzcyhcImJvdW5jZU91dERvd25cIikucmVtb3ZlQ2xhc3MoXCJib3VuY2VJblVwXCIpO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyQoXCIjcm9hZF9cIitpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0sIDEwMDApO1xuXHRcdH1cblx0fVxuXG5cdHN3aXRjaChzdHlsZSkge1xuXHRcdGNhc2UgXCJncmVlblwiOlxuXHRcdFx0YWN0aXZhdGVMaWdodChcImdyZWVuXCIpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInllbGxvd1wiOlxuXHRcdFx0YWN0aXZhdGVMaWdodChcInllbGxvd1wiKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJyZWRcIjpcblx0XHRcdGFjdGl2YXRlTGlnaHQoXCJyZWRcIik7XG5cdFx0XHRicmVhaztcblxuXHR9XG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlTGlnaHQoY29sb3IpIHtcblx0dmFyIGNvbG9ycyA9IFtcInJlZFwiLCBcInllbGxvd1wiLCBcImdyZWVuXCJdO1xuXHRjb2xvcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcblx0XHRpZiAoaXRlbSA9PSBjb2xvcikge1xuXHRcdFx0JChcIiNcIitpdGVtK1wiTWFpblwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ01haW5cIikuYWRkQ2xhc3MoaXRlbStcIkFjdGl2ZU1haW5cIik7XG5cdFx0XHQkKFwiI1wiK2l0ZW0rXCJBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkRlYWN0aXZlQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJGbGFzaGluZ0FkZFwiKS5hZGRDbGFzcyhpdGVtK1wiQWN0aXZlQWRkXCIpO1xuXHRcdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoaXRlbStcIkFjdGl2ZUJvZHlcIik7XG5cdFx0XHQkKFwiLmxldmVsQ29udGFpbmVyXCIpLmFkZENsYXNzKGl0ZW0rXCJEZWFjdGl2ZU1haW5cIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoXCIjXCIraXRlbStcIk1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkFjdGl2ZU1haW5cIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nTWFpblwiKS5hZGRDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpO1xuXHRcdFx0JChcIiNcIitpdGVtK1wiQWRkXCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJBY3RpdmVBZGRcIikucmVtb3ZlQ2xhc3MoaXRlbStcIkZsYXNoaW5nQWRkXCIpLmFkZENsYXNzKGl0ZW0rXCJEZWFjdGl2ZUFkZFwiKTtcblx0XHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKGl0ZW0rXCJBY3RpdmVCb2R5XCIpO1xuXHRcdFx0JChcIi5sZXZlbENvbnRhaW5lclwiKS5yZW1vdmVDbGFzcyhpdGVtK1wiRGVhY3RpdmVNYWluXCIpO1xuXHRcdH1cblx0fSk7XG5cdGNvbnNvbGUubG9nKGNvbG9yK1wiIGlzIGFjdGl2YXRlZFwiKTtcblx0c2V0VGltZW91dCgncGFyc2VTdGF0dXMoXCJodHRwOi8vbmlja2Fyb290Lm1lL3RyYWZmaWNsaWdodC9wYXJzZS5waHBcIiknLCB1cGRhdGVJbnRlcnZhbCoxMDAwKTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
